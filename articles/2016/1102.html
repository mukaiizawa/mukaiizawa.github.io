<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width"/><link href="https://mukaiizawa.github.io/resources/fonts/font-awesome-4.6.3/font-awesome.css" rel="stylesheet"/><link href="https://mukaiizawa.github.io/resources/css/style.css" rel="stylesheet"/><title>Goでアストロイド曲線描いてみた</title></head><body><div class="wrapper"><header><h1><a href="https://mukaiizawa.github.io/index.html">GoTo Great</a><p>偉大なエンジニアを目指して</p></h1></header><div class="inline"><div class="contents"><article><header><span class="fa fa-clock-o"></span><time datetime="2016-11-02">2016-11-02</time><span class="fa fa-tag">Go</span></header><h1>Goでアストロイド曲線描いてみた</h1><p>最近媒介変数曲線描くのにはまってしまったのだが，今日はアストロイド描いて見ました．
      今までの記事はこちら．<ul><li><a href="https://mukaiizawa.github.io/articles/2016/1028.html">Goでリサージュ曲線書いてみた</a></li><li><a href="https://mukaiizawa.github.io/articles/2016/1031.html">Goでサイクロイド曲線書いてみた</a></li></ul></p><h2>ソースコード</h2><p>なかの円を描くのに手間取ってしまった．
      原点のとり方って大事だよなーと座標変換しながら思う今日このごろ．</p>
<pre><code>
<span class="Statement">package</span> main

<span class="Statement">import</span> (
  <span class="String">&quot;image&quot;</span>
  <span class="String">&quot;image/color&quot;</span>
  <span class="String">&quot;image/gif&quot;</span>
  <span class="String">&quot;math&quot;</span>
  <span class="String">&quot;os&quot;</span>
)

<span class="Comment">// x = r(cos(t))^3 = r*(3cos(t)+cos(3t))/4</span>
<span class="Comment">// y = r(sin(t))^3 = r*(3sin(t)-sin(3t))/4</span>

<span class="Statement">var</span> palette = []color.Color{color.Black, color.RGBA{<span class="Number">0x0</span>, <span class="Number">0xff</span>, <span class="Number">0x0</span>, <span class="Number">0xff</span>}, color.RGBA{<span class="Number">0xff</span>, <span class="Number">0x0</span>, <span class="Number">0x0</span>, <span class="Number">0xff</span>}}

<span class="Statement">const</span> (
  BLACK = <span class="Number">0</span>
  GREEN = <span class="Number">1</span>
  RED = <span class="Number">2</span>
  r = <span class="Number">100</span>
)

<span class="Statement">func</span> astroid() {
  anim := gif.GIF{}
  <span class="Statement">for</span> t := <span class="float">0.0</span>; t &lt; <span class="Number">2</span>*math.Pi; t += <span class="float">0.02</span>{
    rect := image.Rect(<span class="Number">0</span>, <span class="Number">0</span>, <span class="Number">2</span>*r, <span class="Number">2</span>*r)
    img := image.NewPaletted(rect, palette)
    <span class="Statement">for</span> ds := <span class="Number">0</span>; ds &lt;= <span class="Number">2</span>*r; ds++ {
      <span class="Comment">// coordinate axes</span>
      img.SetColorIndex(r, ds, GREEN)
      img.SetColorIndex(ds, r, GREEN)
    }
    <span class="Statement">for</span> ds := <span class="float">0.0</span>; ds &lt;= r/<span class="Number">4</span>; ds += <span class="float">1.0</span> {
      <span class="Comment">// cardioid axes</span>
      x := ds*math.Cos(-<span class="Number">3</span>*t) + (r*<span class="Number">3</span>/<span class="Number">4</span>)*math.Cos(t)
      y := ds*math.Sin(-<span class="Number">3</span>*t) + (r*<span class="Number">3</span>/<span class="Number">4</span>)*math.Sin(t)
      img.SetColorIndex(r+<span class="Type">int</span>(x), r+<span class="Type">int</span>(y), RED)
    }
    <span class="Statement">for</span> dθ := <span class="float">0.0</span>; dθ &lt;= <span class="Number">2</span>*math.Pi; dθ += <span class="float">0.001</span> {
      <span class="Comment">// small circle </span>
      x1 := (<span class="Number">3</span>*r/<span class="Number">4</span>)*math.Cos(t) + (r/<span class="Number">4</span>)*math.Sin(dθ)
      y1 := (<span class="Number">3</span>*r/<span class="Number">4</span>)*math.Sin(t) + (r/<span class="Number">4</span>)*math.Cos(dθ)
      img.SetColorIndex(r+<span class="Type">int</span>(x1), r+<span class="Type">int</span>(y1), GREEN)
      <span class="Comment">// large circle</span>
      x2 := r * math.Cos(dθ)
      y2 := r * math.Sin(dθ)
      img.SetColorIndex(r+<span class="Type">int</span>(x2), r+<span class="Type">int</span>(y2), GREEN)
    }
    <span class="Statement">for</span> dt := <span class="float">0.0</span>; dt &lt;= t; dt += <span class="float">0.001</span>{
      <span class="Comment">// trajectory</span>
      x := r * (<span class="Number">3</span>*math.Cos(dt) + math.Cos(<span class="Number">3</span>*dt)) / <span class="Number">4</span>
      y := r * (<span class="Number">3</span>*math.Sin(dt) - math.Sin(<span class="Number">3</span>*dt)) / <span class="Number">4</span>
      img.SetColorIndex(r+<span class="Type">int</span>(x), r+<span class="Type">int</span>(y), RED)
    }
    anim.Delay = <span class="Statement">append</span>(anim.Delay, <span class="Number">6</span>)
    anim.Image = <span class="Statement">append</span>(anim.Image, img)
  }
  gif.EncodeAll(os.Stdout, &amp;anim)
}

<span class="Statement">func</span> main() {
  astroid()
}
</code></pre><img src="https://mukaiizawa.github.io/resources/images/2016/1102_01.gif" alt="アストロイド曲線" width="200" height="200"/><p>アストロイド曲線和む．</p></article></div><div class="sidemenu"><aside class="profile"><h1>プロフィール</h1><a href="https://mukaiizawa.github.io/profile.html"><img src="https://mukaiizawa.github.io/resources/images/profile_picture.png" alt="photo of mukaiizawa" width="80px" height="80px;"/></a><ul><li><a href="https://mukaiizawa.github.io/profile.html"><span class="fa fa-male">mukaiizawa</span></a></li><li><a href="https://github.com/mukaiizawa" target="_blank"><span class="fa fa-github">github</span></a></li><li><a href="mailto:mukaiizawa@yahoo.co.jp"><span class="fa fa-envelope-o">mukaiizawa@yahoo.co.jp</span></a></li></ul></aside><aside><h1>最新記事</h1><ul><li><a href="https://mukaiizawa.github.io/articles/2016/1112.html">VimでJavaのgetterとsetterを作成する</a></li><li><a href="https://mukaiizawa.github.io/articles/2016/1103.html">Goでカージオイド曲線描いてみた</a></li><li><a href="https://mukaiizawa.github.io/articles/2016/1102.html">Goでアストロイド曲線描いてみた</a></li><li><a href="https://mukaiizawa.github.io/articles/2016/1031.html">Goでサイクロイド曲線描いてみた</a></li><li><a href="https://mukaiizawa.github.io/articles/2016/1028.html">Goでリサージュ曲線描いてみた</a></li><li><a href="https://mukaiizawa.github.io/articles/2016/0822.html">cssで段組を実装してみた</a></li><li><a href="https://mukaiizawa.github.io/articles/2016/0819.html">Linux MintでVimをビルドしてみた</a></li></ul></aside></div></div><footer><p>Copyright &copy; mukaiizawa</p></footer></div><script src="https://mukaiizawa.github.io/resources/scripts/jquery.js"></script><script src="https://mukaiizawa.github.io/resources/scripts/common.js"></script></body></html>